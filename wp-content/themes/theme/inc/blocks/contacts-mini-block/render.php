<?php
$classes = isset($block['className']) ? $block['className'] : '';
$align = (isset($block['align']) && !empty($block['align'])) ? 'align' . $block['align'] : '';

$block_title = get_field('block_title');
$show_map = get_field('show_map');
$map_text = get_field('map_text');
$addresses = @settings('addresses');
$phones = @settings('phones');
$emails = @settings('emails');
$socials = @settings('socials');
?>
<div id="contacts-mini-block" class="block-margin block-padding <?= $classes; ?> <?= $align; ?>">
    <div class="block__content">
        <?php if ($block_title) { ?>
            <h2 class="block-title"><?= $block_title; ?></h2>
        <?php } ?>

        <div class="block__contacts">
            <?php if (!empty($addresses || is_array($addresses))) { ?>
                <?php foreach ($addresses as $item) {
                    $value = $item['value'];
                    ?>
                    <div class="contact">
                        <div class="contact__icon">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                 fill="none">
                                <rect x="12" y="11" width="0.01" height="0.01" stroke="#85D040" stroke-width="2.25"
                                      stroke-linejoin="round"/>
                                <path d="M12 22L17.5 16.5C20.5376 13.4624 20.5376 8.53757 17.5 5.5C14.4624 2.46244 9.53757 2.46244 6.5 5.5C3.46244 8.53757 3.46244 13.4624 6.5 16.5L12 22Z"
                                      stroke="#85D040" stroke-width="1.5" stroke-linejoin="round"/>
                            </svg>
                        </div>

                        <div class="contact__title p1"><?= $value; ?></div>
                    </div>
                <?php } ?>
            <?php } ?>

            <?php if (!empty($phones || is_array($phones))) { ?>
                <?php foreach ($phones as $item) {
                    $value = $item['value'];
                    ?>
                    <div class="contact">
                        <div class="contact__icon">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                 fill="none">
                                <rect x="12" y="11" width="0.01" height="0.01" stroke="#85D040" stroke-width="2.25"
                                      stroke-linejoin="round"/>
                                <path d="M12 22L17.5 16.5C20.5376 13.4624 20.5376 8.53757 17.5 5.5C14.4624 2.46244 9.53757 2.46244 6.5 5.5C3.46244 8.53757 3.46244 13.4624 6.5 16.5L12 22Z"
                                      stroke="#85D040" stroke-width="1.5" stroke-linejoin="round"/>
                            </svg>
                        </div>

                        <a href="tel:<?= $value; ?>" class="contact__title p1"><?= $value; ?></a>
                    </div>
                <?php } ?>
            <?php } ?>

            <?php if (!empty($emails || is_array($emails))) { ?>
                <?php foreach ($emails as $item) {
                    $value = $item['value'];
                    ?>
                    <div class="contact">
                        <div class="contact__icon">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                 fill="none">
                                <rect x="12" y="11" width="0.01" height="0.01" stroke="#85D040" stroke-width="2.25"
                                      stroke-linejoin="round"/>
                                <path d="M12 22L17.5 16.5C20.5376 13.4624 20.5376 8.53757 17.5 5.5C14.4624 2.46244 9.53757 2.46244 6.5 5.5C3.46244 8.53757 3.46244 13.4624 6.5 16.5L12 22Z"
                                      stroke="#85D040" stroke-width="1.5" stroke-linejoin="round"/>
                            </svg>
                        </div>

                        <a href="mailto:<?= $value; ?>" class="contact__title p1"><?= $value; ?></a>
                    </div>
                <?php } ?>
            <?php } ?>
        </div>

        <?php if (!empty($socials) || is_array($socials)) { ?>
            <div class="block__socials">
                <?php foreach ($socials as $social) {
                    $value = $social['value'];
                    $icon = wp_get_attachment_image_url($social['icon'], 'full');
                    ?>
                    <a href="<?= $value; ?>" target="_blank" class="social">
                        <img src="<?= $icon; ?>" alt="" class="style-svg">
                    </a>
                <?php } ?>
            </div>
        <?php } ?>
    </div>

    <?php if ($show_map) { ?>
        <div class="block__map">
            <?php if ($map_text) { ?>
                <div class="map-additional">
                    <div class="line">
                        <svg xmlns="http://www.w3.org/2000/svg" width="185" height="312" viewBox="0 0 185 312"
                             fill="none">
                            <path d="M115.921 110.769L116.148 110.324L115.921 110.769ZM26.1261 157.62L26.4511 157.24L26.1261 157.62ZM184.035 9.20037C184.31 9.18117 184.518 8.94228 184.499 8.66681L184.186 4.17771C184.167 3.90223 183.928 3.69449 183.652 3.71369C183.377 3.7329 183.169 3.97179 183.188 4.24726L183.466 8.23757L179.476 8.51579C179.201 8.535 178.993 8.77388 179.012 9.04936C179.031 9.32483 179.27 9.53258 179.546 9.51337L184.035 9.20037ZM31.8982 310.901C31.7322 310.079 31.5751 309.261 31.4269 308.447L30.4431 308.626C30.5925 309.446 30.7507 310.271 30.918 311.099L31.8982 310.901ZM30.6423 303.605C30.4136 301.994 30.2198 300.398 30.0595 298.817L29.0646 298.918C29.2262 300.512 29.4217 302.122 29.6522 303.745L30.6423 303.605ZM29.6655 293.898C29.5703 292.274 29.5107 290.666 29.4855 289.074L28.4857 289.09C28.511 290.696 28.5712 292.318 28.6672 293.956L29.6655 293.898ZM29.5175 284.152C29.5648 282.52 29.6483 280.906 29.7667 279.308L28.7695 279.234C28.65 280.847 28.5657 282.477 28.518 284.123L29.5175 284.152ZM30.2406 274.433C30.4361 272.811 30.6675 271.206 30.9333 269.619L29.9471 269.454C29.6788 271.056 29.4452 272.676 29.2478 274.313L30.2406 274.433ZM31.8515 264.818C32.1951 263.222 32.5734 261.643 32.9846 260.082L32.0176 259.827C31.6026 261.403 31.2207 262.996 30.8738 264.608L31.8515 264.818ZM34.3353 255.388C34.8214 253.83 35.3401 252.291 35.8895 250.769L34.9489 250.43C34.3946 251.965 33.8713 253.518 33.3807 255.09L34.3353 255.388ZM37.6467 246.211C38.2653 244.702 38.9135 243.212 39.5896 241.739L38.6808 241.322C37.9991 242.807 37.3453 244.31 36.7215 245.831L37.6467 246.211ZM41.7165 237.338C42.4542 235.885 43.2185 234.45 44.0072 233.032L43.1332 232.546C42.3386 233.975 41.5684 235.421 40.8249 236.885L41.7165 237.338ZM46.4608 228.801C47.3031 227.407 48.1684 226.029 49.0546 224.668L48.2165 224.122C47.3244 225.493 46.4532 226.88 45.6048 228.284L46.4608 228.801ZM51.7904 220.611C52.7228 219.274 53.6743 217.953 54.6429 216.649L53.8401 216.053C52.8658 217.365 51.9084 218.693 50.9702 220.038L51.7904 220.611ZM57.6178 212.759C58.6268 211.477 59.651 210.211 60.6884 208.96L59.9187 208.321C58.876 209.579 57.8464 210.851 56.8319 212.141L57.6178 212.759ZM63.8612 205.228C64.9343 203.995 66.0188 202.778 67.1124 201.577L66.3728 200.904C65.2745 202.11 64.1852 203.333 63.107 204.571L63.8612 205.228ZM70.4457 197.988C71.5723 196.798 72.7062 195.624 73.8449 194.465L73.1316 193.764C71.9888 194.928 70.8508 196.106 69.7197 197.3L70.4457 197.988ZM77.3031 191.003C78.4741 189.849 79.6479 188.71 80.8221 187.585L80.1305 186.863C78.9531 187.991 77.7759 189.133 76.6012 190.29L77.3031 191.003ZM84.3694 184.231C85.577 183.103 86.7823 181.99 87.9828 180.891L87.3077 180.154C86.105 181.254 84.8971 182.37 83.6867 183.501L84.3694 184.231ZM91.5945 177.614C92.8267 176.504 94.0508 175.41 95.2638 174.33L94.599 173.583C93.3848 174.664 92.1593 175.76 90.9253 176.871L91.5945 177.614ZM98.931 171.077C100.161 169.989 101.395 168.899 102.591 167.841L101.928 167.092C100.72 168.161 99.5114 169.229 98.2684 170.328L98.931 171.077ZM106.284 164.564C107.524 163.458 108.739 162.369 109.925 161.295L109.253 160.554C108.07 161.626 106.857 162.713 105.619 163.817L106.284 164.564ZM113.532 157.985C114.771 156.832 115.969 155.696 117.121 154.576L116.424 153.859C115.278 154.973 114.085 156.104 112.851 157.253L113.532 157.985ZM120.6 151.091C121.779 149.87 122.892 148.668 123.931 147.483L123.18 146.823C122.152 147.994 121.05 149.185 119.881 150.397L120.6 151.091ZM127.051 143.678C128.102 142.29 129.034 140.924 129.833 139.576L128.972 139.067C128.197 140.376 127.286 141.711 126.253 143.075L127.051 143.678ZM132.005 135.068C132.607 133.408 132.966 131.77 133.048 130.15L132.049 130.1C131.973 131.605 131.639 133.145 131.065 134.727L132.005 135.068ZM132.359 125.155C131.847 123.644 131.051 122.162 129.954 120.703L129.155 121.305C130.196 122.688 130.937 124.076 131.412 125.476L132.359 125.155ZM126.531 117.07C125.383 116.062 124.073 115.063 122.596 114.07L122.038 114.9C123.485 115.872 124.76 116.846 125.871 117.822L126.531 117.07ZM118.454 111.551C117.716 111.141 116.948 110.732 116.148 110.324L115.693 111.214C116.483 111.618 117.241 112.021 117.969 112.425L118.454 111.551ZM116.148 110.324C115.413 109.948 114.676 109.58 113.937 109.217L113.496 110.115C114.23 110.475 114.963 110.841 115.693 111.214L116.148 110.324ZM109.488 107.119C107.983 106.438 106.473 105.782 104.959 105.153L104.575 106.076C106.079 106.702 107.58 107.353 109.075 108.03L109.488 107.119ZM100.381 103.329C98.842 102.744 97.3012 102.184 95.7601 101.651L95.433 102.596C96.9645 103.126 98.4958 103.682 100.025 104.264L100.381 103.329ZM91.069 100.106C89.491 99.6132 87.9145 99.1472 86.3413 98.7079L86.0724 99.6711C87.6358 100.108 89.2025 100.571 90.7707 101.061L91.069 100.106ZM81.5853 97.4583C79.9766 97.062 78.3733 96.6937 76.7772 96.3532L76.5685 97.3312C78.1544 97.6695 79.7475 98.0355 81.3461 98.4293L81.5853 97.4583ZM71.9338 95.4001C70.3031 95.1064 68.6821 94.8418 67.0731 94.6063L66.9282 95.5957C68.5264 95.8297 70.1365 96.0924 71.7565 96.3843L71.9338 95.4001ZM62.2013 93.9768C60.5437 93.7914 58.9016 93.6374 57.2772 93.5145L57.2017 94.5116C58.814 94.6337 60.4443 94.7865 62.0901 94.9706L62.2013 93.9768ZM52.3451 93.2342C50.6777 93.1714 49.0328 93.1427 47.413 93.1475L47.416 94.1474C49.0219 94.1427 50.6533 94.1712 52.3075 94.2335L52.3451 93.2342ZM42.4872 93.2689C40.8166 93.3475 39.178 93.4639 37.5747 93.6177L37.6702 94.6131C39.2567 94.4609 40.8792 94.3457 42.5342 94.2678L42.4872 93.2689ZM32.6804 94.2199C31.0094 94.4731 29.3849 94.7706 27.8116 95.1119L28.0236 96.0892C29.5753 95.7526 31.179 95.4588 32.8303 95.2086L32.6804 94.2199ZM23.016 96.3351C21.3847 96.8185 19.8228 97.3559 18.3368 97.9466L18.7062 98.8759C20.1622 98.2971 21.6956 97.7694 23.3001 97.2939L23.016 96.3351ZM13.8156 100.036C12.2927 100.851 10.88 101.738 9.58827 102.695L10.1836 103.499C11.4327 102.573 12.8037 101.712 14.2878 100.917L13.8156 100.036ZM5.85905 106.02C4.69914 107.279 3.7107 108.628 2.91034 110.064L3.78395 110.551C4.54323 109.188 5.48412 107.903 6.59453 106.697L5.85905 106.02ZM1.06529 114.738C0.672885 116.326 0.480695 117.994 0.501529 119.736L1.50146 119.724C1.4816 118.064 1.66474 116.481 2.03612 114.977L1.06529 114.738ZM1.1033 124.705C1.44707 126.237 1.94022 127.817 2.5891 129.442L3.51785 129.072C2.88694 127.491 2.41024 125.962 2.07904 124.486L1.1033 124.705ZM4.71573 133.927C5.47211 135.311 6.33479 136.724 7.30739 138.167L8.13663 137.608C7.17996 136.189 6.3336 134.802 5.59317 133.447L4.71573 133.927ZM10.2502 142.195C11.215 143.422 12.2562 144.669 13.3759 145.936L14.1251 145.273C13.0174 144.02 11.9886 142.788 11.0364 141.577L10.2502 142.195ZM16.7195 149.534C17.8415 150.687 19.0266 151.855 20.2763 153.037L20.9637 152.311C19.7234 151.137 18.5481 149.979 17.436 148.837L16.7195 149.534ZM23.8766 156.327C24.5042 156.881 25.1456 157.439 25.801 158L26.4511 157.24C25.7996 156.682 25.1623 156.128 24.5388 155.577L23.8766 156.327ZM25.801 158C26.4951 158.593 27.1877 159.142 27.8791 159.645L28.4679 158.837C27.7988 158.35 27.1265 157.818 26.4511 157.24L25.801 158ZM32.1653 162.213C33.7715 162.969 35.3708 163.491 36.9636 163.792L37.1492 162.81C35.6447 162.525 34.1258 162.031 32.5911 161.309L32.1653 162.213ZM42.0424 164.014C43.7051 163.847 45.3528 163.45 46.9856 162.844L46.6373 161.906C45.0774 162.486 43.5132 162.861 41.9428 163.019L42.0424 164.014ZM51.5392 160.601C52.9075 159.764 54.2661 158.788 55.616 157.686L54.9834 156.911C53.664 157.989 52.3422 158.938 51.0174 159.748L51.5392 160.601ZM59.3014 154.349C60.4449 153.214 61.5835 151.993 62.7177 150.693L61.9642 150.036C60.8439 151.32 59.7217 152.523 58.597 153.639L59.3014 154.349ZM65.9342 146.787C66.9193 145.525 67.9016 144.207 68.8816 142.838L68.0685 142.256C67.0958 143.615 66.1217 144.921 65.1459 146.172L65.9342 146.787ZM71.7196 138.726C72.6264 137.365 73.5316 135.965 74.4353 134.527L73.5887 133.995C72.6893 135.426 71.789 136.819 70.8876 138.171L71.7196 138.726ZM77.0244 130.305C77.8725 128.889 78.7196 127.444 79.5659 125.972L78.699 125.473C77.8554 126.941 77.0113 128.381 76.1665 129.792L77.0244 130.305ZM81.9921 121.677C82.7967 120.229 83.6008 118.76 84.4045 117.272L83.5246 116.796C82.7226 118.282 81.9205 119.747 81.118 121.191L81.9921 121.677ZM86.7254 112.921C87.4986 111.456 88.2716 109.975 89.0445 108.481L88.1563 108.021C87.3845 109.513 86.6128 110.992 85.8409 112.455L86.7254 112.921ZM91.3006 104.086C92.0526 102.61 92.8048 101.124 93.5571 99.6298L92.664 99.18C91.9123 100.673 91.1608 102.157 90.4096 103.632L91.3006 104.086ZM95.7769 95.2024C96.5166 93.7215 97.2566 92.2348 97.997 90.7445L97.1015 90.2996C96.3612 91.7894 95.6215 93.2754 94.8823 94.7556L95.7769 95.2024ZM100.204 86.2974C100.939 84.8143 101.675 83.3298 102.411 81.8455L101.516 81.401C100.779 82.8855 100.043 84.3703 99.3078 85.8532L100.204 86.2974ZM104.625 77.393C105.364 75.9103 106.103 74.4299 106.844 72.9539L105.95 72.5055C105.209 73.9825 104.469 75.4637 103.73 76.9471L104.625 77.393ZM109.083 68.5113C109.833 67.0313 110.584 65.5578 111.336 64.0929L110.446 63.6361C109.693 65.1028 108.942 66.5779 108.191 68.0592L109.083 68.5113ZM113.623 59.6754C114.392 58.2016 115.163 56.7388 115.935 55.2892L115.053 54.819C114.279 56.2713 113.507 57.7365 112.736 59.2126L113.623 59.6754ZM118.295 50.9128C119.094 49.4505 119.894 48.0045 120.696 46.5773L119.824 46.0875C119.02 47.5185 118.218 48.968 117.417 50.4336L118.295 50.9128ZM123.162 42.259C124 40.8174 124.84 39.3985 125.683 38.0053L124.827 37.4879C123.981 38.8865 123.138 40.3102 122.298 41.7565L123.162 42.259ZM128.303 33.7679C129.193 32.3622 130.086 30.9878 130.982 29.6477L130.151 29.092C129.25 30.4394 128.353 31.8207 127.458 33.2328L128.303 33.7679ZM133.823 25.5301C134.793 24.1716 135.765 22.8566 136.741 21.589L135.949 20.9789C134.965 22.257 133.985 23.5817 133.009 24.9493L133.823 25.5301ZM139.865 17.7127C140.961 16.4172 142.062 15.1858 143.167 14.0233L142.443 13.3342C141.323 14.512 140.209 15.758 139.102 17.0668L139.865 17.7127ZM146.65 10.6096C147.914 9.46259 149.184 8.41174 150.46 7.4641L149.863 6.66133C148.558 7.6305 147.264 8.70251 145.978 9.86905L146.65 10.6096ZM154.583 4.78197C156.051 3.96404 157.527 3.29044 159.011 2.77092L158.681 1.82707C157.137 2.36734 155.609 3.06545 154.096 3.90835L154.583 4.78197ZM163.705 1.65636C165.296 1.45947 166.899 1.44624 168.517 1.62967L168.63 0.636034C166.932 0.443563 165.25 0.457545 163.582 0.663938L163.705 1.65636ZM173.239 2.72028C174.708 3.23268 176.193 3.91234 177.694 4.77014L178.19 3.90195C176.64 3.01603 175.1 2.31011 173.569 1.77607L173.239 2.72028ZM181.673 7.44012C182.336 7.95086 183.003 8.49682 183.672 9.07887L184.328 8.3243C183.645 7.72983 182.963 7.17125 182.283 6.64787L181.673 7.44012Z"
                                  fill="#959595"/>
                        </svg>
                    </div>

                    <h6 class="text"><?= $map_text; ?></h6>
                </div>
            <?php } ?>

            <div class="map">
                <?php render_map() ?>
            </div>
        </div>
    <?php } ?>

    <div class="block__bg">
        <img src="<?= get_theme_file_uri(); ?>/inc/blocks/contacts-mini-block/images/bg.png" alt="">
    </div>
</div>